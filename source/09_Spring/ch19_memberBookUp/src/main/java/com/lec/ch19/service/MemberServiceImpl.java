package com.lec.ch19.service;

import javax.mail.Message;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.servlet.http.HttpSession;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.javamail.JavaMailSenderImpl;
import org.springframework.mail.javamail.MimeMessagePreparator;
import org.springframework.stereotype.Service;

import com.lec.ch19.dao.MemberDao;
import com.lec.ch19.dto.Member;

@Service	//service 빈 생성
public class MemberServiceImpl implements MemberService {
	
	@Autowired
	private MemberDao mDao;
	@Autowired
	private JavaMailSenderImpl mailSender;
	
	@Override
	public int joinMember(final Member member, HttpSession httpSession) {
		//member.getMname()에게 메일보내기, member insert, session에 mid attribute 추가하기
		MimeMessagePreparator message = new MimeMessagePreparator() {
			String content="<div style=\"width: 500px; margin: 0 auto;\">\n" + 
				"	<h1 style=\"color: blue; font-size: 1.5em;\">"+member.getMname()+"님 회원가입 감사합니다</h1>\n" + 
				"	<div>\n" + 
				"		<p>아무개 사이트에서만 쓰실 수 있는 감사쿠폰을 드립니다.</p>\n" + 
				"		<p>\n" + 
				"			<img alt=\"coupon\" src=\"http://localhost:8090/ch19/img/coupon.jpg\">\n" + 
				"		</p>\n" + 
				"	</div>\n" + 
				"	<div>\n" + 
				"		<p style=\"color:red;\">빨간글씨부분</p>\n" + 
				"		<p style=\"color:blue;\">파란글씨부분</p>\n" + 
				"		<img src=\"data:image/png;base64,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\">\n" + 
				"	</div>\n" + 
				"	<p>dadkfaldsfjadksflkadj</p>\n" + 
				"</div>";	//메일 내용(html)
			@Override
			public void prepare(MimeMessage mimeMessage) throws Exception {
				//보내는 메일, 받는 메일, 메일 제목, utf-8/html타입
				mimeMessage.setRecipient(Message.RecipientType.TO, new InternetAddress(member.getMmail()));
				mimeMessage.setFrom(new InternetAddress("park65758636@gmail.com"));
				mimeMessage.setSubject("[HTML가입인사] "+member.getMname()+"님 회원가입 감사합니다(쿠폰동봉)");
				mimeMessage.setText(content, "utf-8", "html");
			}
		};
		mailSender.send(message);	//메일발송
		httpSession.setAttribute("mid", member.getMid());	//세션에 mid속성추가
		return mDao.joinMember(member);	//1 or 0(int 값)으로 전송
	}

	@Override
	public int idConfirm(String mid) {
		return mDao.idConfirm(mid);
	}

	@Override
	public String loginCheck(String mid, String mpw, HttpSession httpSession) {
		String result="로그인 성공";
		Member member = mDao.getDetailMember(mid);
		
		if(member == null){
			result = "유효하지 않은 아이디입니다.";
		}else if(!mpw.equals(member.getMpw())) {
			result="비밀번호가 일치하지 않습니다.";
		}else{
			//로그인 성공
			httpSession.setAttribute("mid", mid);
			httpSession.setAttribute("member", member);
		}
		return result;
	}

	@Override
	public Member getDetailMember(String mid) {
		return mDao.getDetailMember(mid);
	}

	@Override
	public int modifyMember(Member member) {
		return mDao.modifyMember(member);
	}

	@Override
	public int drawalMember(String mid) {
		return mDao.drawalMember(mid);
	}

}
